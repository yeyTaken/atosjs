---
title: "AtosJS - redeem"
---

import { Callout, Tabs, Steps, FileTree } from "nextra/components";
import { FaPlugCircleCheck, FaGifts, FaFileCircleCheck } from "react-icons/fa6";

<Callout type=".">
<div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem', fontSize: '1rem', fontWeight: 'bold' }}>
  <FaGifts size="1rem" />
  <span>Resgatar os presentes:</span>
</div>

o `redeem();{:js}` √© usado para fazer o resgate dos presentes:

```javascript filename="index.js" showLineNumbers copy
const { GiftManager } = require("atosjs");
const gift = new GiftManager();

(async () => {
  // Exemplo de uso de resgate de gift
  let user = {
    id: 123,
    name: "John Doe",
    wallet: {
      coins: 1000,
    },
  };
  console.log(`\nUsu√°rio inicial:`, user);

  // Gerar um gift de moedas
  const coin = await gift.generate({
    type: "coin",
    value: 1500,
    edit: { expiration: "7d" },
  });

  const viewGift = await gift.view(coin);
  const redeemGift = await gift.redeem(coin);

  // resgatar o gift
  if (redeemGift.success) {
    console.log(`\nO gift ${coin} foi resgatado com sucesso!`);
    console.log(
      `O usu√°rio ${user.name} agora tem ${user.wallet.coins + viewGift.value} moedas.`
    );

    user = {
      ...user,
      wallet: {
        ...user.wallet,
        coins: user.wallet.coins + viewGift.value,
      },
    };
  } else {
    console.log(`O gift ${coin} √© um c√≥digo inv√°lido.`);
  }

  // Exibir o usu√°rio atualizado
  console.log("\nUsu√°rio atualizado:", user);
})();
```

---

<div
  style={{
    display: "flex",
    alignItems: "center",
    gap: "0.5rem",
    fontSize: "1rem",
    fontWeight: "bold",
  }}
>
  <FaFileCircleCheck size="1rem" />
  <span>Resultado esperado:</span>
</div>

```bash filename="Terminal"
‚úî Connected to üöÄ AtosDB (json.sqlite)                                                                                                               12:13:54 AM

Usu√°rio inicial: { id: 123, name: 'John Doe', wallet: { coins: 1000 } }

O gift BUGQ8GTXV6PPP foi resgatado com sucesso!
O usu√°rio John Doe agora tem 2500 moedas.

Usu√°rio atualizado: { id: 123, name: 'John Doe', wallet: { coins: 2500 } }
```

</Callout>

```javascript filename="index.js" showLineNumbers copy
const { GiftManager } = require("atosjs");
const gift = new GiftManager();

(async () => {
  const coin = await gift.generate({
    type: "coin",
    value: 1500,
    edit: { expiration: "7d" },
  });

  const result = await gift.redeem(coin);
  if (result.success) {
    console.log("Gift resgatado com sucesso!!");
  } else {
    console.log("Gift inv√°lido, expirado, ou j√° foi usado.");
  }
})();
```

<Callout type=".">
> Resumo geral do `await gift.redeem();{:js}`
</Callout>

| Op√ß√£o     | Tipo      | Padr√£o | Descri√ß√£o                                                                        |
| --------- | --------- | ------ | -------------------------------------------------------------------------------- |
| `success` | `boolean` | `true` | Retorna `false` se o presente foi resgatado com sucesso; caso contr√°rio, `true`. |
